==========
To-do List
==========

Code
-----

- Currently the stats maintenance just deletes messages that are more than 6 months
  old. This is silly, it would be much nicer to just keep a fixed number of messages
  per stats target. Say, 1000 or 500 messages. This is what the old Rack-based system
  does, and it would be good justification for storing each stats target's messages
  separately like we do now ;)

  The way I started doing this in PostgreSQL earlier was to count the total number of
  messages in each stats target, figure out how many to delete, if any, then delete
  all messages from that target using something like "ORDER BY id LIMIT foo". If this
  works in MySQL too, this should be easy (though potentially slow)

- Web interface for editing rulesets and stats metadata- how would we handle
  authentication, if necessary?

  One idea:

    Initially anyone can edit any stats metadata or any ruleset- within limits.
    Potentially harmful rulesets should not be allowed, and deleting stats
    targets shouldn't be allowed. This level of priviledge could be represented
    perhaps by a 'guest' key granting some set of capabilities.

    In this state, anyone can 'claim' a ruleset or stats target. Claiming the target
    would then lock out the 'guest' key and grant a new key for editing that target/rule.
    The idea would be that the person responsible for the CIA connection to a project
    would claim it, then they could distribute keys to others that also want to edit
    it. If a target was claimed maliciously or unintentionally, the proper owner
    could dispute the claim.

    This seems like it would work alright for stats targets, as they always exist,
    they just require the addition of metadata. Rulesets however must be created.
    It's probably a bad idea to let anyone create stats targets or xmlrpc targets,
    as a badly constructed or malicious stats target can fill the database with
    garbage, and a malicious xmlrpc target could put CIA into an infinite loop.
    It is however a good idea to let people get CIA into their own IRC channel without
    having to request help from someone with authority.

    So, perhaps anyone can create an IRC ruleset, then either claim that ruleset
    for themselves (with a key being granted) or leave it open to the public?

- Rulesets could use some sort of subroutine call, maybe by embedding a <ruleset>
  tag with a different ruleset's URI. A new URI scheme could be added for rulesets
  that will never be executed on their own but should be referenceable from inside
  others.

- rrdtool (or similar) for graphing stats target activity

- Link from authors and projects in the stats browser's message lists to the appropriate
  author and project pages. It would be great to, while browsing a project, be able
  to easily see what a particular person is working on elsewhere. A few things to consider:

    - stats metadata could be used to make the connection without hardcoding
      any assumptions about the stats hierarchy into CIA, but where do these go?

    - How do we account for any differences in commit authors with stats author
      pages, as caused by the ruleset?

  One potential solution is, for each potentially linkable part of the commit message,
  the formatter (or some preprocessor that the runs before the formatter) looks for a
  stats:// ruleset using that part of the message in a path= attribute. If it finds one,
  it hyperlinks to the stats target that results from running the message through that
  ruleset. If there are multiple messages with matching path= attributes, it would have
  some way to determine which one is best.

- We have an RSS 2.0 interface now, but it doesn't yet display much. The formatters for
  the 'rss' medium should be enhanced.

- Implement the RSS <cloud> tag, and the RssInterface for XML-RPC necessary to support it.
  Leases could be stored in a separate XML-RPC table that's cleaned of old leases during
  stats maintenance. This would finally make it possible to use standard protocols (RSS,
  XML-RPC, HTTP...) to receive real-time notification about any project in CIA. This could
  be done for XML feeds as well.


Documentation
-------------

- figure out what should be in this list :)


Hosting
-------

- Look for potential new homes for CIA. Navi has enough bandwidth for now,
  but two DSL lines definitely couldn't handle a slashdotting.
